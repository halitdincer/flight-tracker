apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: flight-tracker

resources:
  - ../../base

# Image tags will be updated by CI/CD
images:
  - name: ghcr.io/halitdincer/flight-tracker-api
    newTag: latest
  - name: ghcr.io/halitdincer/flight-tracker-web
    newTag: latest

# Production-specific patches
patches:
  - patch: |-
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        name: api
      spec:
        replicas: 2
    target:
      kind: Deployment
      name: api
  - patch: |-
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        name: web
      spec:
        replicas: 2
    target:
      kind: Deployment
      name: web
